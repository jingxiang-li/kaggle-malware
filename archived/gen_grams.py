from os import path
from nltk.util import ngrams, everygrams
from collections import Counter
import pickle


def op_list_generator(wd='/home/s_ariel/Documents'):
    for i in range(22):
        file_name = 'op' + str(i) + '.pickle'
        with open(path.join(wd, file_name), 'rb') as f_in:
            op_lists = pickle.load(f_in)
            for op in op_lists:
                yield op


gram_dicts = []
op_gen = op_list_generator()
j = 0
for op in op_gen:
    gram_counts = Counter(everygrams(op, max_len=2))
    gram_dicts.append(gram_counts)
    j += 1
    if j % 100 == 0:
        print(j)

wd = '/home/s_ariel/Documents'
with open(path.join(wd, 'instr_freq.pickle'), 'wb') as f_out:
    pickle.dump(gram_dicts, f_out)
